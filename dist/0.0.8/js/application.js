(function(){this.Application=function(){function e(e){this.path=e,this.create_layout(),this.create_topbar(),this.show_breadcrumb(this.path),this.show_sidebar(this.path)}return e.prototype.create_layout=function(){return window.layout=$("body").layout({spacing_closed:5,stateManagement__enabled:!0,resizerDblClickToggle:!1,north:{slidable:!1,spacing_open:18,size:24,resizable:!1,togglerLength_open:0,togglerTip_closed:chrome.i18n.getMessage("exit_full_window"),onopen_start:function(){return window.layout.open("west"),$("#navbar").show(),$("#toolbar").show()},onclose_start:function(){return window.layout.close("west"),$("#navbar").hide(),$("#toolbar").hide()}},west:{spacing_open:5,livePaneResizing:!0,size:192,togglerLength_open:0,togglerLength_closed:0,slideTrigger_open:"mouseover",resizerTip:chrome.i18n.getMessage("resize")},center:{onresize_end:function(){var e;return e=util.current_editor(),e?e.editor.resize():void 0}}})},e.prototype.create_topbar=function(){var e,a,n,s,t,o,l,i,r,c,g,d;for($(".ui-layout-resizer-north").append('<div id="navbar">\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("file")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n        <li><a class="new_file_btn">'+chrome.i18n.getMessage("new_file")+'</a></li>\n        <li><a class="new_folder_btn">'+chrome.i18n.getMessage("new_folder")+'</a></li>\n        <li><a class="save_btn">'+chrome.i18n.getMessage("save")+'</a></li>\n        <li><a class="save_all_btn">'+chrome.i18n.getMessage("save_all")+'</a></li>\n        <li><a class="close_tab_btn">'+chrome.i18n.getMessage("close_tab")+'</a></li>\n        <li><a class="close_other_tabs_btn">'+chrome.i18n.getMessage("close_other_tabs")+'</a></li>\n        <li><a class="close_all_tabs_btn">'+chrome.i18n.getMessage("close_all_tabs")+'</a></li>\n    </ul>\n  </span>\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("edit")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n      <li><a class="indent_btn">'+chrome.i18n.getMessage("indent")+'</a></li>\n      <li><a class="outdent_btn">'+chrome.i18n.getMessage("outdent")+'</a></li>\n      <li><a class="lower_case_btn">'+chrome.i18n.getMessage("lower_case")+'</a></li>\n      <li><a class="upper_case_btn">'+chrome.i18n.getMessage("upper_case")+'</a></li>\n      <li><a class="remove_lines_btn">'+chrome.i18n.getMessage("remove_lines")+'</a></li>\n      <li><a class="toggle_comment_btn">'+chrome.i18n.getMessage("toggle_comment")+'</a></li>\n    </ul>\n  </span>\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("search")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n      <li><a class="find_btn">'+chrome.i18n.getMessage("find")+'</a></li>\n      <li><a class="replace_btn">'+chrome.i18n.getMessage("replace")+'</a></li>\n    </ul>\n  </span>\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("view")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n        <li class="dropdown-submenu">\n            <a>'+chrome.i18n.getMessage("syntax")+'</a>\n            <ul class="dropdown-menu" id="mode_list"></ul>\n        </li>\n        <li><a class="toggle_word_wrap_btn">'+chrome.i18n.getMessage("toggle_word_wrap")+'</a></li>\n        <li><a class="toggle_invisibles_btn">'+chrome.i18n.getMessage("toggle_invisibles")+'</a></li>\n        <li><a class="full_window_btn">'+chrome.i18n.getMessage("full_window")+'</a></li>\n        <li><a class="pop_out_btn">'+chrome.i18n.getMessage("pop_out")+'</a></li>\n    </ul>\n  </span>\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("preferences")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n        <li><a class="options_btn">'+chrome.i18n.getMessage("options")+'</a></li>\n    </ul>\n  </span>\n  <span class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      '+chrome.i18n.getMessage("help")+'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n        <li><a href="https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts" target="_blank">'+chrome.i18n.getMessage("keyboard_shortcuts")+'</a></li>\n        <li><a href="http://slimtext.org" target="_blank">'+chrome.i18n.getMessage("website")+'</a></li>\n        <li><a href="https://github.com/tylerlong/slimtext.org/issues" target="_blank">'+chrome.i18n.getMessage("report_issue")+'</a></li>\n        <li><a class="check_for_updates_btn">'+chrome.i18n.getMessage("check_for_updates")+'</a></li>\n        <li><a class="about_btn">'+chrome.i18n.getMessage("about")+'</a></li>\n    </ul>\n  </span>\n</div>\n<div id="toolbar">\n<a class="new_file_btn" title="'+chrome.i18n.getMessage("new_file")+'"><i class="icon-file"></i></a>\n<a class="new_folder_btn" title="'+chrome.i18n.getMessage("new_folder")+'"><i class="icon-folder-close-alt"></i></a>\n<a class="save_btn" title="'+chrome.i18n.getMessage("save")+'"><i class="icon-save"></i></a>\n<a class="find_btn" title="'+chrome.i18n.getMessage("find")+'"><i class="icon-search"></i></a>\n<a class="toggle_invisibles_btn" title="'+chrome.i18n.getMessage("toggle_invisibles")+'"><i class="icon-eye-open"></i></a>\n<a class="full_window_btn" title="'+chrome.i18n.getMessage("full_window")+'"><i class="icon-fullscreen"></i></a>\n<a class="pop_out_btn" title="'+chrome.i18n.getMessage("pop_out")+'"><i class="icon-external-link"></i></a>\n<a class="options_btn" title="'+chrome.i18n.getMessage("options")+'"><i class="icon-cog"></i></a>\n<a class="check_for_updates_btn" title="'+chrome.i18n.getMessage("check_for_updates")+'"><i class="icon-cloud-download"></i></a>\n<a title="'+chrome.i18n.getMessage("report_issue")+'" href="https://github.com/tylerlong/slim_text/issues" target="_blank"><i class="icon-github-alt"></i></a>\n<a class="about_btn" title="'+chrome.i18n.getMessage("about")+'"><i class="icon-info-sign"></i></a>\n<i class="icon-fullscreen" id="hidden_btn"></i>\n</div>'),l=[["a","d"],["e","j"],["k","o"],["p","s"],["t","z"]],t=[],i=0,c=l.length;c>i;i++)o=l[i],$("#mode_list").append('<li class="dropdown-submenu">\n    <a>'+o[0].toUpperCase()+" - "+o[1].toUpperCase()+'</a>\n    <ul class="dropdown-menu" id="'+o[0]+"_to_"+o[1]+'"></ul>\n</li>'),t.push([RegExp("^["+o[0]+"-"+o[1]+"]","i"),"#"+o[0]+"_to_"+o[1]]);d=mode.modes;for(a in d)for(n=d[a],e='<li><a data-mode="'+a+'" class="mode_link">'+n+"</a></li>",r=0,g=t.length;g>r;r++)if(s=t[r],n.match(s[0])){$(s[1]).append(e);break}return window.layout.allowOverflow($(".ui-layout-resizer-north")),window.layout.state.north.isClosed?($("#navbar").hide(),$("#toolbar").hide()):void 0},e.prototype.show_breadcrumb=function(e){var a,n,s,t,o,l,i,r,c,g,d,p,u;if(e.substr(e.length-1)!=="/"&&(e+="/"),document.title=e,$("#route").empty(),l=file_manager.route(e),l.reverse(),navigator.appVersion.indexOf("Windows")!==-1){if(s=_.first(l),l=_.rest(l),i=_.first(l),i&&(i.name=s.name),l.length===0){for(n=$('<select id="drives_select"></select>'),p=file_manager.drives(),r=0,g=p.length;g>r;r++)a=p[r],n.append('<option value="'+a+'">'+a.substr(0,a.length-1)+"</option>");n.val(s.name.toUpperCase()+"/"),$("#route").append(n)}}else l.length===0&&$("#route").append("/");for(u=_.initial(l),c=0,d=u.length;d>c;c++)t=u[c],o=$('<a class="folder_link">'+t.name+"</a>"),o.data("path",t.path),$("#route").append(o),t.name==="/"?$("#route").append(" "):$("#route").append(" / ");return t=_.last(l),t?$("#route").append(""+t.name+" /"):void 0},e.prototype.show_sidebar=function(e,a){var n,s,t,o,l,i,r;for(null==a&&(a=null),$("#sidebar").empty(),t=file_manager.list(e),t=_.sortBy(t,function(e){return e.name.toLowerCase()}),a||(n=util.current_editor(),n&&(a=n.path)),r=[],l=0,i=t.length;i>l;l++)s=t[l],util.clickable(s)?(o=$('<a class="'+s.type+'_link">'+s.name+"</a>"),o.data("path",s.path),$("#sidebar").append(o),a===s.path&&(o.css("color","white"),o.css("cursor","text")),s.type==="folder"&&$("#sidebar").append("/")):$("#sidebar").append("<span>"+s.name+"</span>"),r.push($("#sidebar").append("<br/>"));return r},e.prototype.refresh_sidebar=function(e){return null==e&&(e=null),this.show_sidebar(document.title,e)},e.prototype.open_file=function(e){var a;return a=new Editor(e),editors[a.uid]=a},e}()}).call(this);